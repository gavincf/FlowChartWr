;=========================================================================
; MACRO
;=========================================================================
MR_PLAY_SP_W_GROUP MACRO C_GROUP,VALUE
	JSR	BK0_STOP_EQU0;WITH STOP EVO
	JSR	BK0_STOP_SP_MS

	LDA	#C_GROUP
	STA	R_GROUP_NO
	LDA	#VALUE
	STA	SPCH1_NO
	M_SET_BANK L_PLAY_SPCH1
	JSR	L_PLAY_SPCH1

	ENDM


MR_PLAY_MIDI MACRO VALUE
	LDA	#VALUE
	STA	SOUND_NO
	M_SET_BANK L_PLAY_MIDI
	JSR	L_PLAY_MIDI
	ENDM



MR_PLAY_SPCH1_GROUP_NOP MACRO VALUE

.IFDEF C_GROUP_EN
	LDA	#C_GP_NOP_IDX
	STA	R_GROUP_NO
.ENDIF

	LDA	#VALUE
	STA	SPCH1_NO
	M_SET_BANK L_PLAY_SPCH1
	JSR	L_PLAY_SPCH1

	ENDM

MR_PLAY_SPCH1_GROUP_NOP_STOP_IDLE MACRO VALUE

.IFDEF C_GROUP_EN
	LDA	#C_GP_NOP_IDX
	STA	R_GROUP_NO
.ENDIF

	LDA	#VALUE
	STA	SPCH1_NO
	M_SET_BANK L_PLAY_SPCH1
	JSR	L_PLAY_SPCH1
	
	JSR	L_STOP_IDLE;CNT0

	ENDM

MR_PLAY_SPCH2_GROUP_NOP MACRO VALUE

.IFDEF C_GROUP_EN
	LDA	#C_GP_NOP_IDX
	STA	R_GROUP_NO
.ENDIF

	LDA	#VALUE
	STA	SPCH2_NO
	M_SET_BANK L_PLAY_SPCH2
	JSR	L_PLAY_SPCH2

	ENDM

MR_PLAY_SPCH2_GROUP_NOP_STOP_IDLE MACRO VALUE

.IFDEF C_GROUP_EN
	LDA	#C_GP_NOP_IDX
	STA	R_GROUP_NO
.ENDIF

	LDA	#VALUE
	STA	SPCH2_NO
	M_SET_BANK L_PLAY_SPCH2
	JSR	L_PLAY_SPCH2
	
	JSR	L_STOP_IDLE;CNT0

	ENDM

MR_PLAY_GROUP_RANDOM MACRO VALUE
	JSR	BK0_STOP_EQU0;WITH STOP EVO
	JSR	BK0_STOP_SP_MS
	LDA	#VALUE
	STA	R_GROUP_NO
	
	M_SET_BANK L_PLAY_GROUP_RANDOM
	JSR	L_PLAY_GROUP_RANDOM

	ENDM
MR_PLAY_GROUP_RANDOM_STOP_IDLE MACRO VALUE
	JSR	BK0_STOP_EQU0;WITH STOP EVO
	JSR	BK0_STOP_SP_MS
	LDA	#VALUE
	STA	R_GROUP_NO

	M_SET_BANK L_PLAY_GROUP_RANDOM
	JSR	L_PLAY_GROUP_RANDOM
	
	JSR	L_STOP_IDLE;CNT0

	ENDM
MR_PLAY_GROUP_RANDOM_STOP_IDLE_TIME MACRO VALUE
	JSR	BK0_STOP_EQU0;WITH STOP EVO
	JSR	BK0_STOP_SP_MS
	LDA	#VALUE
	STA	R_GROUP_NO

	M_SET_BANK L_PLAY_GROUP_RANDOM
	JSR	L_PLAY_GROUP_RANDOM
	
	JSR	L_STOP_IDLE_TIME;CNT0

	ENDM
MR_PLAY_GROUP_RANDOM_NS MACRO VALUE
	LDA	#VALUE
	STA	R_GROUP_NO
	
	M_SET_BANK L_PLAY_GROUP_RANDOM
	JSR	L_PLAY_GROUP_RANDOM

	ENDM
MR_PLAY_GROUP_RANDOM_STOP_IDLE_NS MACRO VALUE
	LDA	#VALUE
	STA	R_GROUP_NO

	M_SET_BANK L_PLAY_GROUP_RANDOM
	JSR	L_PLAY_GROUP_RANDOM
	
	JSR	L_STOP_IDLE

	ENDM
MR_PLAY_GROUP_RANDOM_STOP_IDLE_TIME_NS MACRO VALUE
	LDA	#VALUE
	STA	R_GROUP_NO

	M_SET_BANK L_PLAY_GROUP_RANDOM
	JSR	L_PLAY_GROUP_RANDOM
	
	JSR	L_STOP_IDLE_TIME

	ENDM

MR_CMP_GROUP MACRO VALUE
	LDA	R_GROUP_NO
	CMP	#VALUE
	ENDM

MR_CMP_SPCH1 MACRO VALUE
	LDA	SPCH1_NO
	CMP	#VALUE
	ENDM

MR_CMP_SPCH2 MACRO VALUE
	LDA	SPCH2_SOUND_NO
	CMP	#VALUE
	ENDM
MR_PLAY_SPCH1_RANDOM_GP_NOP MACRO VALUE

.IFDEF C_RANDOM_TABLE_USED
	LDA	#C_RANDOM_GP_NOP
	STA	R_RANDOM_GP_NO
.ENDIF
	LDA	#VALUE
	STA	SPCH1_NO
	M_SET_BANK L_PLAY_SPCH1
	JSR	L_PLAY_SPCH1

	ENDM

MR_PLAY_SPCH1_RANDOM_GP_NOP_STOP_IDLE MACRO VALUE

.IFDEF C_RANDOM_TABLE_USED
	LDA	#C_RANDOM_GP_NOP
	STA	R_RANDOM_GP_NO
.ENDIF
	LDA	#VALUE
	STA	SPCH1_NO
	M_SET_BANK L_PLAY_SPCH1
	JSR	L_PLAY_SPCH1
	
	JSR	L_STOP_IDLE;CNT0

	ENDM
MR_EQU_SPCH1_NO_2B MACRO AUDIO_NO,L_EQU_JMP
	LDA	SPCH1_NO1
	CMP	#.HIGH.AUDIO_NO
	BNE	L_NEQ_JMP#
	LDA	SPCH1_NO ; ADDR,NOT DP ,3BYTE
	CMP	#.LOW.AUDIO_NO ; 2BYTE
	BNE	3 ;;
	JMP	L_EQU_JMP ; 3 BYTE
L_NEQ_JMP#:
	ENDM
M_EQU_BUSY_SPCH1MS_2B MACRO AUDIO_NO,L_BUSY
	LDA	#.HIGH.AUDIO_NO
	STA	REG_HL
	LDA	#.LOW.AUDIO_NO
	STA	REG_EA
	JSR	L_EQU_BUSY_SPCH1MS_2B
	BEQ	3
	JMP	L_BUSY
;free / != AUDIO_NO
	ENDM
		


MR_EQU_SPCH1_NO MACRO AUDIO_NO,L_EQU_JMP
	LDA	SPCH1_NO
	CMP	#.LOW.AUDIO_NO
	BNE	3
	JMP	L_EQU_JMP
	ENDM
