

MR_BP0_ORA MACRO MASK_INV,ORA_V
	.IF ( C_ULTRAIO_IO_EN .EQ. 1 )
	LDA !BP0D;-------------------------------??
	EOR #FFH
	AND !BP0
	AND	#MASK_INV
	ORA	#ORA_V
	ORA	BP0M_BAK ;1: input:pullhigh / 0:output / Floating
	STA	!BP0
	.ELSE
	LDA	R_BP0
	AND	#MASK_INV
	ORA	#ORA_V
	STA	R_BP0
	LDA	R_BP0
	STA	BP0
		
	.ENDIF
	ENDM
MR_BP0_EOR MACRO EOR_V
	.IF ( C_ULTRAIO_IO_EN .EQ. 1 )
	LDA !BP0D
	EOR #FFH
	AND !BP0
	EOR	#EOR_V
	ORA	BP0M_BAK
	STA	!BP0
	.ELSE
	LDA	R_BP0
	EOR	#EOR_V
	STA	R_BP0
	LDA	R_BP0
	STA	BP0
		
	.ENDIF
	ENDM

MR_BP1_ORA MACRO MASK_INV,ORA_V
	.IF ( C_ULTRAIO_IO_EN .EQ. 1 )
	LDA !BP1D
	EOR #FFH
	AND !BP1
	AND	#MASK_INV
	ORA	#ORA_V
	ORA	BP1M_BAK
	STA	!BP1
	.ELSE
	LDA	R_BP1
	AND	#MASK_INV
	ORA	#ORA_V
	STA	R_BP1
	LDA	R_BP1
	STA	BP1
		
	.ENDIF
	ENDM
MR_BP1_EOR MACRO EOR_V
	.IF ( C_ULTRAIO_IO_EN .EQ. 1 )
	LDA !BP1D
	EOR #FFH
	AND !BP1
	EOR	#EOR_V
	ORA	BP1M_BAK
	STA	!BP1
	.ELSE
	LDA	R_BP1
	EOR	#EOR_V
	STA	R_BP1
	LDA	R_BP1
	STA	BP1
		
	.ENDIF
	ENDM

MR_BP2_ORA MACRO MASK_INV,ORA_V
	.IF ( C_ULTRAIO_IO_EN .EQ. 1 )
	LDX !BP2D
	EXTERN BP2D_OUTPUT_TABLE
	LDA BP2D_OUTPUT_TABLE,X
	AND	#MASK_INV
	ORA	#ORA_V
	ORA	BP2M_BAK
	STA	!BP2
	.ELSE
	LDA	R_BP2
	AND	#MASK_INV
	ORA	#ORA_V
	STA	R_BP2
	LDA	R_BP2
	STA	BP2
		
	.ENDIF
	ENDM
MR_BP2_EOR MACRO EOR_V
	.IF ( C_ULTRAIO_IO_EN .EQ. 1 )
	LDX !BP2D
	EXTERN BP2D_OUTPUT_TABLE
	LDA BP2D_OUTPUT_TABLE,X
	AND !BP2
	EOR	#EOR_V
	ORA	BP2M_BAK
	STA	!BP2
	.ELSE
	LDA	R_BP2
	EOR	#EOR_V
	STA	R_BP2
	LDA	R_BP2
	STA	BP2
		
	.ENDIF
	ENDM

MR_BP0_ORAR MACRO MASK_INV,ORA_R
	.IF ( C_ULTRAIO_IO_EN .EQ. 1 )
	LDA !BP0D
	EOR #FFH
	AND !BP0
	AND	#MASK_INV
	ORA	ORA_R
	ORA	BP0M_BAK
	STA	!BP0
	.ELSE
	LDA	R_BP0
	AND	#MASK_INV
	ORA	ORA_R
	STA	R_BP0
	LDA	R_BP0
	STA	BP0
	.ENDIF
	ENDM

MR_BP1_ORAR MACRO MASK_INV,ORA_R
	.IF ( C_ULTRAIO_IO_EN .EQ. 1 )
	LDA !BP1D
	EOR #FFH
	AND !BP1
	AND	#MASK_INV
	ORA	ORA_R
	ORA	BP1M_BAK
	STA	!BP1
	.ELSE
	LDA	R_BP1
	AND	#MASK_INV
	ORA	ORA_R
	STA	R_BP1
	LDA	R_BP1
	STA	BP1
		
	.ENDIF
	ENDM

MR_BP2_ORAR MACRO MASK_INV,ORA_R
	.IF ( C_ULTRAIO_IO_EN .EQ. 1 )
	LDX !BP2D
	EXTERN BP2D_OUTPUT_TABLE
	LDA BP2D_OUTPUT_TABLE,X
	AND	#MASK_INV
	ORA	ORA_R
	ORA	BP2M_BAK
	STA	!BP2
	.ELSE
	LDA	R_BP2
	AND	#MASK_INV
	ORA	ORA_R
	STA	R_BP2
	LDA	R_BP2
	STA	BP2
	.ENDIF
	ENDM
