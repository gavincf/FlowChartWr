





L_DELAY10MS: 
.IF ( C_CPU_CLOCK .EQ. 6144)
 LDX #256-48
.ENDIF
.IF ( C_CPU_CLOCK .EQ. 20000)
 LDX #256-156
.ENDIF

L_DELAY10MS_S10:
 LDA #0
L_DELAY10MS_S20
 INC A
 BNE L_DELAY10MS_S20
 
 INX
 BNE L_DELAY10MS_S10
 RTS
 
 
.IF (CHIPSERIES = 'N567G') .OR. (CHIPSERIES = 'N567H') .OR. (CHIPSERIES = 'N567K') .OR. (CHIPSERIES = 'N588L')

BK0_START_TMG1_2MS: 
 LDA #0100B  
 STA !TMG1C 
 LDA #191 
 STA !TMG1V
 LDA #01H
 TSB TMG1C 
 LDA #TIMERG1_INT_BIT
 TSB !IEF0
 RTS

BK0_START_TMG1_1MS: 
 LDA #0100B  
 STA !TMG1C 
 LDA #193 
 STA !TMG1V
 LDA #01H
 TSB TMG1C 
 LDA #TIMERG1_INT_BIT
 TSB !IEF0
 RTS

BK0_START_TMG1_05MS_W_CHK:
 LDA #01H
 BIT TMG1C 
 BNE BK0_START_TMG1_05MS_END
BK0_START_TMG1_05MS: 
 LDA #0100B  
 STA !TMG1C 
 LDA #47 
 STA !TMG1V
 LDA #01H
 TSB TMG1C 
 LDA #TIMERG1_INT_BIT
 TSB !IEF0
BK0_START_TMG1_05MS_END:
 RTS

BK0_START_TMG1_0625MS: 
 LDA #0100B  
 STA !TMG1C 
 LDA #59 
 STA !TMG1V
 LDA #01H
 TSB TMG1C 
 LDA #TIMERG1_INT_BIT
 TSB !IEF0
 RTS
BK0_START_TMG1_0250MS: 
 LDA #0100B  
 STA !TMG1C 
 LDA #23 
 STA !TMG1V
 LDA #01H
 TSB TMG1C 
 LDA #TIMERG1_INT_BIT
 TSB !IEF0
 RTS

BK0_START_TMG1_0125MS: 
 LDA #0100B  
 STA !TMG1C 
 LDA #11 
 STA !TMG1V
 LDA #01H
 TSB TMG1C 
 LDA #04H
 TSB !IEF0
 RTS


BK0_START_TMG1_07MS: 
 LDA #0100B  
 STA !TMG1C 
 LDA #67 
 STA !TMG1V
 LDA #01H
 TSB TMG1C 
 LDA #TIMERG1_INT_BIT
 TSB !IEF0
 RTS
 
BK0_STOP_TMGX:
BK0_STOP_TMG1: 
 LDA #01H
 TRB TMG1C 
 LDA #TIMERG1_INT_BIT
 TRB !IEF0
 RTS
.ENDIF
.IF (CHIPSERIES = 'N588H') .OR. (CHIPSERIES = 'N588J')
BK0_START_TMG0_2MS: 
 LDA #0100B  
 STA !TMG0C 
 LDA #191 
 STA !TMG0V
 LDA #01H
 TSB TMG0C 
 LDA #TIMERG0_INT_BIT
 TSB !IEF0
 RTS

BK0_START_TMG0_05MS_W_CHK:
 LDA #01H
 BIT TMG0C 
 BNE BK0_START_TMG0_05MS_END
BK0_START_TMG0_05MS: 
 LDA #0100B  
 STA !TMG0C 
 LDA #47 
 STA !TMG0V
 LDA #01H
 TSB TMG0C 
 LDA #TIMERG0_INT_BIT
 TSB !IEF0
BK0_START_TMG0_05MS_END:
 RTS

BK0_START_TMG0_1MS_W_CHK:
 LDA #01H
 BIT TMG0C 
 BNE BK0_START_TMG0_1MS_END
BK0_START_TMG0_1MS: 
 LDA #0100B  
 STA !TMG0C 
 LDA #95 
 STA !TMG0V
 LDA #01H
 TSB TMG0C 
 LDA #TIMERG0_INT_BIT
 TSB !IEF0
BK0_START_TMG0_1MS_END:
 RTS

BK0_START_TMG0_0625MS: 
 LDA #0100B  
 STA !TMG0C 
 LDA #59 
 STA !TMG0V
 LDA #01H
 TSB TMG0C 
 LDA #TIMERG0_INT_BIT
 TSB !IEF0
 RTS
BK0_START_TMG0_0250MS: 
 LDA #0100B  
 STA !TMG0C 
 LDA #23 
 STA !TMG0V
 LDA #01H
 TSB TMG0C 
 LDA #TIMERG0_INT_BIT
 TSB !IEF0
 RTS
BK0_START_TMG0_0240MS: 
 LDA #0100B  
 STA !TMG0C 
 LDA #22 
 STA !TMG0V
 LDA #01H
 TSB TMG0C 
 LDA #TIMERG0_INT_BIT
 TSB !IEF0
 RTS

BK0_START_TMG0_027MS:
 LDA #0100B  
 STA !TMG0C 
 LDA #25 
 STA !TMG0V
 LDA #01H
 TSB TMG0C 
 LDA #TIMERG0_INT_BIT
 TSB !IEF0
 RTS
BK0_START_TMG0_0167MS:
 LDA #0010B  
 STA !TMG0C 
 LDA #101 
 STA !TMG0V
 LDA #01H
 TSB TMG0C 
 LDA #TIMERG0_INT_BIT
 TSB !IEF0
 RTS

BK0_START_TMG0_018MS:
 LDA #0010B  
 STA !TMG0C 
 LDA #138 
 STA !TMG0V
 LDA #01H
 TSB TMG0C 
 LDA #TIMERG0_INT_BIT
 TSB !IEF0
 RTS
BK0_START_TMG0_0187MS:
 LDA #0010B  
 STA !TMG0C 
 LDA #143 
 STA !TMG0V
 LDA #01H
 TSB TMG0C 
 LDA #TIMERG0_INT_BIT
 TSB !IEF0
 RTS
BK0_START_TMG0_0200MS:
 LDA #0010B  
 STA !TMG0C 
 LDA #152 
 STA !TMG0V
 LDA #01H
 TSB TMG0C 
 LDA #TIMERG0_INT_BIT
 TSB !IEF0
 RTS
 

BK0_START_TMG0_0125MS: 
 LDA #0100B  
 STA !TMG0C 
 LDA #11 
 STA !TMG0V
 LDA #01H
 TSB TMG0C 
 LDA #TIMERG0_INT_BIT
 TSB !IEF0
 RTS


BK0_START_TMG0_07MS: 
 LDA #0100B  
 STA !TMG0C 
 LDA #67 
 STA !TMG0V
 LDA #01H
 TSB TMG0C 
 LDA #TIMERG0_INT_BIT
 TSB !IEF0
 RTS
 
BK0_STOP_TMGX:
BK0_STOP_TMG0: 
 LDA #01H
 TRB TMG0C 
 LDA #TIMERG0_INT_BIT
 TRB !IEF0
 RTS
.ENDIF

.IF (CHIPSERIES = 'N589A') .OR. (CHIPSERIES = 'N589B') .OR. (CHIPSERIES = 'N589C') .OR. (CHIPSERIES = 'N589D')

BK0_START_TMG_1MS:
 
 LDA #1100B  
 STA !TMGC 
 LDA #00H
 STA !TMGVH 
 LDA #159 
 STA !TMGVL 
 LDA #01H
 TSB TMGC 
 M_INT_ENABLE TIMERG_INT_BIT
 
 RTS

BK0_START_TMG_05MS:
 
 LDA #1100B  
 STA !TMGC 
 LDA #00H
 STA !TMGVH 
 LDA #79 
 STA !TMGVL 
 LDA #01H
 TSB TMGC 
 M_INT_ENABLE TIMERG_INT_BIT
 
 RTS

BK0_START_TMG_025MS:
 
 LDA #1100B  
 STA !TMGC 
 LDA #00H
 STA !TMGVH 
 LDA #39 
 STA !TMGVL 
 LDA #01H
 TSB TMGC 
 M_INT_ENABLE TIMERG_INT_BIT
 
 RTS


BK0_START_TMA_2MS:
 
 LDA #1000B  
 STA !TMAC 
 LDA #159 
 STA !TMAV 
 LDA #01H
 TSB TMAC 
 M_INT_ENABLE TIMERA_INT_BIT
 
 RTS

BK0_START_TMA_045MS:

 LDA #1000B  
 STA !TMAC 
 LDA #35 
 STA !TMAV 
 LDA #01H
 TSB TMAC 
 M_INT_ENABLE TIMERA_INT_BIT
 
 RTS

BK0_STOP_TMA:
 
 M_INT_DISABLE TIMERA_INT_BIT
 LDA #01H
 TRB TMAC 
 
 RTS

BK0_STOP_TMGX:
BK0_STOP_TMG:
 M_INT_DISABLE TIMERG_INT_BIT
 LDA #01H
 TRB TMGC 

 RTS
.ENDIF


L_DELAY100US:



.IF ( C_CPU_CLOCK .EQ. 6144)
 LDA #67
.ENDIF


.IF ( C_CPU_CLOCK .EQ. 20000)
 LDA #222
.ENDIF

L_DELAY100US_S10:
 NOP 
 NOP 
 DEC A  
 BNE L_DELAY100US_S10 
 RTS 


.IF ( C_CPU_CLOCK .EQ. 6144)
BK0_DELAY10US:
 LDA #5
 BRA BK0_DELAY100US_S10


BK0_DELAY50US:



 LDA #33
 BRA BK0_DELAY100US_S10

BK0_DELAY100US:



 LDA #67
BK0_DELAY100US_S10:
 NOP 
 NOP 
 DEC A  
 BNE BK0_DELAY100US_S10 
 RTS 


BK0_DELAY500US:



 LDA #120
 BRA BK0_DELAY1000US_S10

BK0_DELAY1MS:



 LDA #240
BK0_DELAY1000US_S10:
 NOP 
 NOP 
 NOP 
 NOP 
 NOP 

 NOP 
 NOP 
 NOP 
 NOP 
 NOP 
 
 DEC A  
 BNE BK0_DELAY1000US_S10 
 RTS 




BK0_DELAY50MS:
 LDX #250
 
BK0_DELAY50MS_S10:
 M_WDT_CLR

 JSR BK0_DELAY100US
 JSR BK0_DELAY100US
 DEX
 BNE BK0_DELAY50MS_S10
 RTS

BK0_DELAY10MS:
 LDX #50
BK0_DELAY10MS_S10:
 M_WDT_CLR

 JSR BK0_DELAY100US
 JSR BK0_DELAY100US
 DEX
 BNE BK0_DELAY10MS_S10
 RTS
.ENDIF 

.IF ( C_CPU_CLOCK .EQ. 20000)
BK0_DELAY500US:



 LDX #5
 BRA BK0_DELAY100US_S10

BK0_DELAY1MS:
 LDX #10

BK0_DELAY100US_S10:
 LDA #80
BK0_DELAY100US_S20:
 NOP 
 NOP 
 NOP 
 NOP 
 NOP 
 
 NOP 
 NOP 
 NOP 
 NOP 
 NOP 
 
 DEC A  
 BNE BK0_DELAY100US_S20 
 DEX
 BNE BK0_DELAY100US_S10
 RTS 
 
.ENDIF 




